<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - æ–‡ä»¶å‹ç¼©å·¥å…·</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        body, .main-bg {
            background: linear-gradient(135deg, #f4f6fa 60%, #e3eafc 100%);
            font-size: 1.16rem;
        }
        .main-panel {
            max-width: 1400px;
            background: #fff;
            border-radius: 2.2rem;
            box-shadow: 0 8px 48px 0 rgba(60, 80, 180, 0.10), 0 1.5px 8px #e0e6ed;
            margin: 36px auto 0 auto;
            padding: 0 0.5rem;
        }
        .main-panel .col-md-5, .main-panel .col-md-7 {
            min-height: 650px;
        }
        .main-panel h2 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1.7rem;
            letter-spacing: 1px;
        }
        .main-panel .form-check-label {
            font-weight: 600;
            font-size: 1.18rem;
        }
        .main-panel .section-title {
            font-weight: bold;
            font-size: 1.22rem;
            margin-bottom: 0.5rem;
        }
        #dropZone {
            border: 2.5px dashed #4f8cff;
            border-radius: 1.2rem;
            padding: 2.4rem 1.2rem;
            background: #f6faff;
            cursor: pointer;
            transition: border-color 0.2s, background 0.2s;
        }
        #dropZone.dragover {
            border-color: #198754;
            background: #e9fbe5;
        }
        #fileNameDisplay {
            min-height: 1.5em;
            font-weight: 900;
            color: #fff;
            background: linear-gradient(90deg, #38d39f 0%, #198754 100%);
            border-radius: 0.7rem;
            padding: 0.25em 1.1em 0.25em 2.2em;
            margin-left: 0.7em;
            font-size: 1.13em;
            display: inline-block;
            box-shadow: 0 2px 8px #b6e6c6;
            border: none;
            position: relative;
            letter-spacing: 0.5px;
            animation: fileSelectedFlash 1.2s;
            transition: box-shadow 0.2s, background 0.2s;
        }
        #fileNameDisplay::before {
            content: '\2714';
            position: absolute;
            left: 0.7em;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.15em;
            color: #fff;
            background: #198754;
            border-radius: 50%;
            width: 1.3em;
            height: 1.3em;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 1px 4px #b6e6c6;
        }
        @keyframes fileSelectedFlash {
            0%   { box-shadow: 0 0 0 6px #b6e6c6; }
            80%  { box-shadow: 0 0 0 0px #b6e6c6; }
            100% { box-shadow: 0 2px 8px #b6e6c6; }
        }
        #fileNameDisplay.empty {
            color: #adb5bd;
            background: #f6faff;
            font-weight: normal;
            border: none;
            box-shadow: none;
            padding: 0.2em 0.7em;
            margin-left: 0.5em;
            font-size: 1.08em;
        }
        #fileNameDisplay.empty::before {
            display: none;
        }
        .btn-lg {
            padding: 1.1rem 2.3rem;
            font-size: 1.22rem;
            border-radius: 0.8rem;
            background: linear-gradient(90deg, #4f8cff 0%, #38d39f 100%);
            color: #fff;
            border: none;
            box-shadow: 0 2px 8px #e0e0e0;
            font-weight: 700;
            letter-spacing: 1px;
            transition: background 0.2s, box-shadow 0.2s;
        }
        .btn-lg:hover, .btn-lg:focus {
            background: linear-gradient(90deg, #38d39f 0%, #4f8cff 100%);
            color: #fff;
            box-shadow: 0 4px 16px #b6e6c6;
        }
        .btn-outline-secondary.btn-lg {
            background: #fff;
            color: #4f8cff;
            border: 2px solid #b6c6e6;
            box-shadow: none;
        }
        .btn-outline-secondary.btn-lg:hover {
            background: #e3eafc;
            color: #198754;
            border: 2px solid #b6e6c6;
        }
        .progress {
            height: 1.7rem;
            box-shadow: 0 2px 12px #e0e0e0;
            border-radius: 1rem;
            background: #e9fbe5;
        }
        .progress-bar {
            background: linear-gradient(90deg, #38d39f 0%, #198754 100%) !important;
            color: #fff;
            font-weight: bold;
            font-size: 1.08em;
        }
        .card-results, .card-welcome {
            background: linear-gradient(120deg, #f8f9fa 80%, #e3eafc 100%);
            border: 1.5px solid #d0d8e6;
            border-radius: 1.3rem;
            box-shadow: 0 4px 32px 0 rgba(60, 80, 180, 0.10);
        }
        .card-results h4, .card-welcome h4 {
            font-size: 1.32rem;
            font-weight: bold;
            letter-spacing: 0.5px;
        }
        .card-results {
            border: 2px solid #b6e6c6;
            background: linear-gradient(120deg, #f8f9fa 80%, #e3fce6 100%);
            box-shadow: 0 4px 32px 0 rgba(60, 180, 120, 0.10);
        }
        .card-welcome {
            border: 2px solid #b6c6e6;
            background: linear-gradient(120deg, #f8f9fa 80%, #e3eafc 100%);
        }
        .card-welcome ul, .card-results ul {
            font-size: 1.18rem;
            line-height: 2.0;
        }
        .algo-select-label, .mode-select-label {
            font-weight: bold;
            margin-right: 0.8rem;
        }
        .divider {
            border-top: 2px solid #e9ecef;
            margin: 2rem 0 1.5rem 0;
        }
        .col-md-7 {
            min-height: 650px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        #centerArea {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .card-welcome, .card-results, #statusArea, #errorArea, #progressBarContainer {
            max-width: 720px;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        .btn-outline-primary, .btn-outline-secondary {
            border-radius: 0.6rem;
            font-size: 1.13rem;
        }
        .form-control {
            font-size: 1.16rem;
            border-radius: 0.6rem;
        }
        .alert-danger {
            font-size: 1.16rem;
            border-radius: 0.8rem;
        }
        @media (max-width: 991px) {
            .main-panel { max-width: 98vw; border-radius: 0.9rem; }
        }
        @media (max-width: 768px) {
            .main-panel { flex-direction: column !important; }
            .border-end { border-right: none !important; border-bottom: 1.5px solid #eee !important; }
            .main-panel .col-md-5, .main-panel .col-md-7 { min-height: unset; }
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-transparent" style="position: absolute; top: 0; right: 0; z-index: 10; width: 100%;">
      <div class="container-fluid justify-content-end">
        <button id="langSwitchBtn" class="btn btn-outline-secondary btn-sm me-2">English</button>
        <button id="darkModeBtn" class="btn btn-outline-secondary btn-sm">ğŸŒ™ å¤œé—´æ¨¡å¼</button>
      </div>
    </nav>
    <div class="container-fluid main-bg py-4">
      <div class="main-panel row mx-auto d-flex shadow-lg">
        <!-- å·¦æ ï¼šå‚æ•°ä¸ä¸Šä¼  -->
        <div class="col-md-5 p-5 border-end d-flex flex-column justify-content-between">
          <div>
            <h2 id="mainTitle" class="mb-4">æ–‡ä»¶å‹ç¼©ä¸è§£å‹ç¼©å·¥å…·</h2>
            <div class="mb-4">
              <span class="algo-select-label" id="algoLabel">é€‰æ‹©ç®—æ³•:</span>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="algorithm" id="algoHuffman" value="huffman" checked>
                <label class="form-check-label" for="algoHuffman" id="labelHuffman">Huffman</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="algorithm" id="algoLzw" value="lzw">
                <label class="form-check-label" for="algoLzw" id="labelLzw">LZW</label>
              </div>
            </div>
            <div class="mb-4">
              <span class="mode-select-label" id="modeLabel">æ“ä½œæ¨¡å¼:</span>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="mode" id="modeCompress" value="compress" checked>
                <label class="form-check-label" for="modeCompress" id="labelCompress">å‹ç¼©</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="mode" id="modeDecompress" value="decompress">
                <label class="form-check-label" for="modeDecompress" id="labelDecompress">è§£å‹ç¼©</label>
              </div>
            </div>
            <div class="file-upload-panel p-3 mb-4 shadow-sm">
              <label for="fileInput" class="form-label" id="fileInputLabel">é€‰æ‹©æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼š</label>
              <input id="fileInput" type="file" name="file" class="form-control file-direct" webkitdirectory directory multiple style="display:none;">
              <button type="button" id="customFileBtn" class="btn btn-outline-primary">é€‰æ‹©æ–‡ä»¶</button>
              <span id="customFileName" class="file-name-tip mt-2 empty">(æœªé€‰æ‹©æ–‡ä»¶)</span>
            </div>
            <div id="dropZone" class="mb-3" style="border:2px dashed #4f8cff; border-radius:1em; padding:2em; text-align:center;">
                <span id="dropZoneTip" style="font-size:1.18em;color:#4f8cff;">æ‹–æ‹½æˆ–ç²˜è´´æ–‡ä»¶/æ–‡ä»¶å¤¹åˆ°æ­¤å¤„ä¸Šä¼ </span>
            </div>
          </div>
          <div class="d-flex justify-content-center gap-4 mt-3">
            <button id="processButton" class="btn btn-primary btn-lg shadow-sm">å¼€å§‹å¤„ç†</button>
            <button id="clearButton" class="btn btn-outline-secondary btn-lg shadow-sm">æ¸…ç©ºè¾“å…¥</button>
          </div>
        </div>
        <!-- å³æ ï¼šè¿›åº¦ä¸ç»“æœ/æ¬¢è¿å¡ç‰‡ï¼Œå…¨éƒ¨å±…ä¸­ -->
        <div class="col-md-7 p-5 d-flex flex-column align-items-center justify-content-center h-100">
          <div id="centerArea" class="w-100 d-flex flex-column align-items-center justify-content-center">
            <div id="welcomeArea" class="card card-welcome p-5 my-4" style="display: block;">
              <h4 id="welcomeTitle">æ¬¢è¿ä½¿ç”¨æ–‡ä»¶å‹ç¼©/è§£å‹ç¼©å·¥å…·</h4>
              <ul>
                <li id="welcomeItem1">æ”¯æŒ Huffmanã€LZW ç®—æ³•ï¼Œé€‚åˆæ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€äºŒè¿›åˆ¶ç­‰æ‰€æœ‰ç±»å‹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚</li>
                <li id="welcomeItem2">æœ€å¤§æ”¯æŒ 20MBï¼Œæ”¯æŒä»»æ„æ ¼å¼ï¼ˆå¦‚ .txt .bin .dat .jpg .png .mp3 .mp4 .zip .huff .lzw ç­‰ï¼‰ã€‚</li>
                <li id="welcomeItem3">å‹ç¼©ç‡ã€å¤„ç†é€Ÿåº¦ä¸€ç›®äº†ç„¶ï¼Œç»“æœå¯ç›´æ¥ä¸‹è½½ã€‚</li>
              </ul>
              <div class="mt-4">
                <a href="{{ url_for('static', filename='example/testfile.txt') }}" class="btn btn-outline-primary btn-sm me-2" download id="downloadExampleText">ä¸‹è½½ç¤ºä¾‹æ–‡æœ¬</a>
                <a href="{{ url_for('static', filename='example/testfile.bin') }}" class="btn btn-outline-secondary btn-sm" download id="downloadExampleBin">ä¸‹è½½ç¤ºä¾‹äºŒè¿›åˆ¶</a>
              </div>
            </div>
            <div id="statusArea" class="text-center my-4" style="display: none;">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">å¤„ç†ä¸­...</span>
              </div>
              <p class="mt-3">å¤„ç†ä¸­ï¼Œè¯·ç¨å€™...</p>
            </div>
            <div class="progress mb-4" id="progressBarContainer" style="display:none;">
              <div class="progress-bar bg-success" id="progressBar" style="width:0%">0%</div>
            </div>
            <div id="errorArea" class="alert alert-danger" role="alert" style="display: none;"></div>
            <div id="resultsArea" class="card card-results p-5 my-4" style="display: none;">
              <h4 id="resultTitle">å¤„ç†ç»“æœ</h4>
              <ul id="metricsList" class="list-unstyled"></ul>
              <div id="downloadLinkContainer"></div>
            </div>
          </div>
        </div>
      </div>
      <footer class="text-center text-muted mt-5 mb-3" style="font-size:1.13rem;">
        <p id="footerText">&copy; 2024-<span id="currentYear"></span> å‹ç¼© Web App</p>
      </footer>
    </div>
    <div class="toast-container position-fixed top-0 end-0 p-3" id="toastContainer"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
    <script>document.getElementById('currentYear').textContent = new Date().getFullYear();</script>
    <!-- å¸®åŠ©æ¨¡æ€æ¡† -->
    <div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title help-title" id="helpModalLabel"><span style="font-size:1.4em;">ğŸ†˜</span> å¸®åŠ©ä¸è¯´æ˜</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body help-section" style="font-size:1.15em;line-height:1.9;">
            <hr>
            <section class="help-block mb-4">
              <h6 class="help-subtitle"><span style="color:#38d39f;">ğŸ“¦</span> ä½¿ç”¨è¯´æ˜</h6>
              <ul class="help-list">
                <li>æ”¯æŒ <b>ä»»æ„ç±»å‹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</b> å‹ç¼©ï¼Œå‹ç¼©åŒ…ä¸º <b>zip</b>ï¼Œå†…éƒ¨æ–‡ä»¶é‡‡ç”¨æ‰€é€‰ç®—æ³•ï¼ˆHuffman/LZWï¼‰å‹ç¼©ã€‚</li>
                <li>è§£å‹ç¼©æ”¯æŒ <b>.huff</b>ã€<b>.lzw</b> æ–‡ä»¶å’Œ <b>zip æ–‡ä»¶å¤¹åŒ…</b>ï¼ˆè‡ªåŠ¨è¿˜åŸåŸå§‹ç»“æ„ï¼‰ã€‚</li>
                <li>æ”¯æŒæ‰¹é‡ä¸Šä¼ ã€ç›®å½•ä¸Šä¼ ã€æ‹–æ‹½ã€ç²˜è´´ç­‰å¤šç§æ–¹å¼ã€‚</li>
                <li>è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç¼–ç ï¼Œ<span style="color:#ff9800;">é UTF-8 æ–‡æœ¬ä¼šé«˜äº®æç¤º</span>ã€‚</li>
              </ul>
            </section>
            <section class="help-block mb-4">
              <h6 class="help-subtitle"><span style="color:#4f8cff;">â“</span> å¸¸è§é—®é¢˜</h6>
              <div class="qa-card">
                <div class="qa-q"><b>Q:</b> ä¸ºä»€ä¹ˆæœ‰äº›æ–‡ä»¶è§£å‹åå†…å®¹å¼‚å¸¸æˆ–ä¹±ç ï¼Ÿ</div>
                <div class="qa-a"><b>A:</b> å¯èƒ½æ˜¯åŸæ–‡ä»¶ç¼–ç ä¸æ˜¯ UTF-8ï¼Œå»ºè®®ç”¨è®°äº‹æœ¬å¦å­˜ä¸º UTF-8 æ ¼å¼ï¼Œæˆ–ç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</div>
              </div>
              <div class="qa-card">
                <div class="qa-q"><b>Q:</b> æ”¯æŒå“ªäº›ç±»å‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Ÿ</div>
                <div class="qa-a"><b>A:</b> æ”¯æŒæ‰€æœ‰ç±»å‹çš„æ–‡ä»¶ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€äºŒè¿›åˆ¶ç­‰ï¼‰å’Œæ–‡ä»¶å¤¹ï¼Œå‹ç¼©æ—¶ä¼šè‡ªåŠ¨æ‰“åŒ…ä¸º zipã€‚</div>
              </div>
              <div class="qa-card">
                <div class="qa-q"><b>Q:</b> è§£å‹ç¼©æ”¯æŒå“ªäº›æ ¼å¼ï¼Ÿ</div>
                <div class="qa-a"><b>A:</b> æ”¯æŒ .huffã€.lzw ç®—æ³•å‹ç¼©æ–‡ä»¶å’Œ zip æ–‡ä»¶å¤¹åŒ…ï¼ˆè‡ªåŠ¨è¿˜åŸåŸå§‹ç»“æ„ï¼‰ã€‚</div>
              </div>
              <div class="qa-card">
                <div class="qa-q"><b>Q:</b> ä¸ºä»€ä¹ˆå‹ç¼©åä½“ç§¯åè€Œå˜å¤§ï¼Ÿ</div>
                <div class="qa-a"><b>A:</b> éšæœºæ•°æ®ã€å·²å‹ç¼©æ–‡ä»¶æˆ–å›¾ç‰‡/éŸ³é¢‘ç­‰æœ¬èº«å·²å‹ç¼©æ ¼å¼ï¼Œä½¿ç”¨é€šç”¨ç®—æ³•å¯èƒ½ä½“ç§¯å¢å¤§ã€‚</div>
              </div>
            </section>
            <section class="help-block mb-4">
              <h6 class="help-subtitle"><span style="color:#ffb300;">ğŸ’¡</span> ç®—æ³•åŸç†ç®€ä»‹</h6>
              <div class="algo-card">
                <b>Huffman ç¼–ç ï¼š</b> åŸºäºå­—ç¬¦/å­—èŠ‚é¢‘ç‡æ„å»ºæœ€ä¼˜å‰ç¼€æ ‘ï¼Œé€‚åˆæ–‡æœ¬å‹ç¼©ã€‚<br>
                <b>LZW ç®—æ³•ï¼š</b> åŸºäºå­—å…¸çš„æ— æŸå‹ç¼©ï¼Œé€‚åˆé«˜é‡å¤äºŒè¿›åˆ¶æ•°æ®ã€‚
              </div>
            </section>
            <div class="help-footer text-muted mt-3" style="font-size:0.98em;">
              å¦‚æœ‰æ›´å¤šé—®é¢˜è¯·è”ç³»å¼€å‘è€…æˆ–æŸ¥é˜…é¡¹ç›®æ–‡æ¡£ã€‚
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- æ‚¬æµ®å¸®åŠ©æŒ‰é’®ï¼Œå›ºå®šå³ä¸‹è§’ -->
    <button id="helpButton" class="help-float-btn" data-bs-toggle="modal" data-bs-target="#helpModal" title="å¸®åŠ©">
      <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
        <circle cx="16" cy="16" r="16" fill="none"/>
        <text x="16" y="23" text-anchor="middle" font-size="22" font-family="Arial, Helvetica, sans-serif" fill="#fff" font-weight="bold">?</text>
      </svg>
    </button>
    <script>
        // æ·»åŠ è¯­è¨€åˆ‡æ¢æ”¯æŒ
        const i18n = {
            'zh': {
                title: 'æ–‡ä»¶å‹ç¼©å·¥å…·',
                algorithm: 'é€‰æ‹©ç®—æ³•',
                huffman: 'Huffman',
                lzw: 'LZW',
                mode: 'æ“ä½œæ¨¡å¼',
                compress: 'å‹ç¼©',
                decompress: 'è§£å‹ç¼©',
                selectFile: 'é€‰æ‹©æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼š',
                dragDrop: 'æ‹–æ‹½æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹åˆ°æ­¤å¤„ä¸Šä¼ ï¼Œæˆ–ç²˜è´´æ–‡ä»¶',
                tips: 'æç¤ºï¼š',
                tip1: 'Huffman å¯¹æ–‡æœ¬æ•ˆæœå¥½ï¼ŒLZW é€‚åˆé«˜é‡å¤äºŒè¿›åˆ¶æ•°æ®ã€‚',
                tip2: 'æ”¯æŒ .txt, .log, .csv, .xml, .htm, .html, .c, .cpp, .java, .py, .js, .sql, .json, .md, .bmp, .bin, .dat ç­‰æ ¼å¼ã€‚',
                tip3: 'è§£å‹æ—¶è¯·ä¸Šä¼ å¯¹åº”ç®—æ³•ç”Ÿæˆçš„å‹ç¼©æ–‡ä»¶(.huff æˆ– .lzw)ã€‚',
                tip4: 'æ”¯æŒä¸Šä¼ æ•´ä¸ªç›®å½•ï¼ˆä¼šè‡ªåŠ¨æ‰“åŒ…ä¸ºZIPæ–‡ä»¶ï¼‰ã€‚',
                start: 'å¼€å§‹å¤„ç†',
                clear: 'æ¸…ç©ºè¾“å…¥',
                help: 'å¸®åŠ©',
                welcome: 'æ¬¢è¿ä½¿ç”¨æ–‡ä»¶å‹ç¼©/è§£å‹ç¼©å·¥å…·',
                welcome1: 'æ”¯æŒ Huffmanã€LZW ç®—æ³•ï¼Œé€‚åˆæ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ã€‚',
                welcome2: 'æœ€å¤§æ”¯æŒ 20MB æ–‡ä»¶ï¼Œæ”¯æŒ .txt .bin .dat .huff .lzw ç­‰æ ¼å¼ã€‚',
                welcome3: 'å‹ç¼©ç‡ã€å¤„ç†é€Ÿåº¦ä¸€ç›®äº†ç„¶ï¼Œç»“æœå¯ç›´æ¥ä¸‹è½½ã€‚',
                downloadExample: 'ä¸‹è½½ç¤ºä¾‹æ–‡æœ¬',
                downloadExampleBin: 'ä¸‹è½½ç¤ºä¾‹äºŒè¿›åˆ¶',
                processing: 'å¤„ç†ä¸­ï¼Œè¯·ç¨å€™...',
                results: 'å¤„ç†ç»“æœ',
                night: 'ğŸŒ™ å¤œé—´æ¨¡å¼',
                day: 'â˜€ï¸ æ—¥é—´æ¨¡å¼'
            },
            'en': {
                title: 'File Compression Tool',
                algorithm: 'Select Algorithm',
                huffman: 'Huffman',
                lzw: 'LZW',
                mode: 'Operation Mode',
                compress: 'Compress',
                decompress: 'Decompress',
                selectFile: 'Select File or Folder:',
                dragDrop: 'Drag and drop files or folders here, or paste files',
                tips: 'Tips:',
                tip1: 'Huffman works well for text, LZW is suitable for highly repetitive binary data.',
                tip2: 'Supports .txt, .log, .csv, .xml, .htm, .html, .c, .cpp, .java, .py, .js, .sql, .json, .md, .bmp, .bin, .dat and more.',
                tip3: 'When decompressing, please upload files generated by the corresponding algorithm (.huff or .lzw).',
                tip4: 'Supports uploading entire directories (will be automatically packed into ZIP).',
                start: 'Start Processing',
                clear: 'Clear Input',
                help: 'Help',
                welcome: 'Welcome to File Compression Tool',
                welcome1: 'Supports Huffman and LZW algorithms, suitable for text and binary files.',
                welcome2: 'Maximum file size: 20MB, supports .txt .bin .dat .huff .lzw and more.',
                welcome3: 'Compression ratio and processing speed are clearly visible, results can be downloaded directly.',
                downloadExample: 'Download Example Text',
                downloadExampleBin: 'Download Example Binary',
                processing: 'Processing, please wait...',
                results: 'Processing Results',
                night: 'ğŸŒ™ Night Mode',
                day: 'â˜€ï¸ Day Mode'
            }
        };

        let currentLang = 'zh';

        function switchLang() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            updateUILanguage();
            localStorage.setItem('language', currentLang);
        }

        function updateUILanguage() {
            const lang = i18n[currentLang];
            document.title = lang.title;
            document.querySelector('.algo-select-label').textContent = lang.algorithm;
            document.querySelector('label[for="algoHuffman"]').textContent = lang.huffman;
            document.querySelector('label[for="algoLzw"]').textContent = lang.lzw;
            document.querySelector('.mode-select-label').textContent = lang.mode;
            document.querySelector('label[for="modeCompress"]').textContent = lang.compress;
            document.querySelector('label[for="modeDecompress"]').textContent = lang.decompress;
            document.querySelector('.form-label').textContent = lang.selectFile;
            document.querySelector('#dropZone span').textContent = lang.dragDrop;
            document.querySelector('.form-text .fw-bold').textContent = lang.tips;
            const tips = document.querySelectorAll('.form-text ul li');
            tips[0].textContent = lang.tip1;
            tips[1].textContent = lang.tip2;
            tips[2].textContent = lang.tip3;
            tips[3].textContent = lang.tip4;
            document.querySelector('#processButton').textContent = lang.start;
            document.querySelector('#clearButton').textContent = lang.clear;
            document.querySelector('#helpButton').textContent = lang.help;
            document.querySelector('.card-welcome h4').textContent = lang.welcome;
            const welcomeItems = document.querySelectorAll('.card-welcome ul li');
            welcomeItems[0].textContent = lang.welcome1;
            welcomeItems[1].textContent = lang.welcome2;
            welcomeItems[2].textContent = lang.welcome3;
            const downloadButtons = document.querySelectorAll('.card-welcome .btn');
            downloadButtons[0].textContent = lang.downloadExample;
            downloadButtons[1].textContent = lang.downloadExampleBin;
            document.querySelector('#statusArea p').textContent = lang.processing;
            document.querySelector('.card-results h4').textContent = lang.results;
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç”¨æˆ·è¯­è¨€åå¥½
        document.addEventListener('DOMContentLoaded', function() {
            const savedLang = localStorage.getItem('language');
            if (savedLang) {
                currentLang = savedLang;
                updateUILanguage();
            }
        });
    </script>
</body>
</html>